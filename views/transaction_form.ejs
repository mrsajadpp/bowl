<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    /* Global Reset */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Roboto', sans-serif;
        line-height: 1.6;
        background-color: #f4f4f4;
        color: #333;
        padding: 20px;
    }

    h1,
    h2,
    h3 {
        color: #0078e8;
        margin-bottom: 10px;
    }

    h1 {
        font-size: 2rem;
    }

    h2 {
        font-size: 1.5rem;
    }

    h3 {
        font-size: 1.2rem;
        margin-top: 20px;
    }

    p {
        margin: 5px 0 15px;
    }

    p.error {
        color: red;
        font-weight: bold;
    }
</style>
<h1>Transaction Form</h1>

<% if (error) { %>
    <p style="color: red; font-weight: bold;">
        <%= error %>
    </p>
    <% } %>

        <form action="/transactions" method="POST"
            style="max-width: 500px; margin: 0 auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9;">
            <div style="margin-bottom: 15px;">
                <label for="amount"
                    style="font-size: 16px; font-weight: bold; display: block; margin-bottom: 5px;">Amount:</label>
                <input type="number" id="amount" name="amount" step="0.01"
                    value="<%= form_data ? form_data.amount : '' %>"
                    style="width: 100%; padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc;"
                    required>
            </div>

            <div style="margin-bottom: 15px;">
                <label for="transaction_type"
                    style="font-size: 16px; font-weight: bold; display: block; margin-bottom: 5px;">Transaction
                    Type:</label>
                <select id="transaction_type" name="transaction_type"
                    style="width: 100%; padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc;"
                    required>
                    <option value="receive" <%=form_data && form_data.transaction_type==='receive' ? 'selected' : '' %>
                        >Receive</option>
                    <option value="expense" <%=form_data && form_data.transaction_type==='expense' ? 'selected' : '' %>>Expense
                    </option>
                </select>
            </div>

            <div style="margin-bottom: 15px;">
                <label for="transaction_date"
                    style="font-size: 16px; font-weight: bold; display: block; margin-bottom: 5px;">Transaction
                    Date:</label>
                <input type="date" id="transaction_date" name="transaction_date"
                    value="<%= form_data ? form_data.transaction_date : '' %>"
                    style="width: 100%; padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc;"
                    required>
            </div>

            <div style="margin-bottom: 15px;">
                <label for="note"
                    style="font-size: 16px; font-weight: bold; display: block; margin-bottom: 5px;">Note:</label>
                <textarea id="note" name="transaction_note" rows="4" cols="50"
                    style="width: 100%; padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc;"
                    placeholder="Optional notes about the transaction"><%= form_data ? form_data.transaction_note : '' %></textarea>
            </div>

            <div style="margin-bottom: 15px;">
                <label for="category"
                    style="font-size: 16px; font-weight: bold; display: block; margin-bottom: 5px;">Category:</label>
                <select id="category" name="category"
                    style="width: 100%; padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc;"
                    required>
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>

            <button type="submit"
                style="width: 100%; padding: 12px 0; font-size: 18px; font-weight: bold; background-color: #0078e8; color: white; border: none; border-radius: 5px; cursor: pointer;">Submit</button>
        </form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const expenseCategories = [
            "Housing", "Utilities", "Groceries", "Transportation", "Healthcare", "Entertainment", "Dining Out", "Clothing",
            "Education", "Travel", "Personal Care", "Fitness", "Insurance", "Debt Repayment", "Savings", "Investments",
            "Technology", "Gifts", "Charity", "Childcare", "Pets", "Home Improvement", "Subscriptions", "Legal Fees",
            "Events & Celebrations", "Professional Services", "Taxes", "Luxury", "Hobbies", "Alcohol & Tobacco",
            "Fines & Penalties", "Miscellaneous"
        ];

        const receiveCategories = [
            "Salary", "Business Revenue", "Freelancing", "Investments", "Rental Income", "Government Benefits", "Gifts",
            "Inheritances", "Prizes", "Side Hustles", "Royalties", "Crowdfunding", "Refunds", "Grants", "Scholarships",
            "Tips", "Pension", "Dividends", "Alimony/Child Support", "Stock Sales", "Affiliate Marketing", "Consulting Fees",
            "Event Hosting", "Intellectual Property", "Barter or Trade", "Cryptocurrency", "Reselling", "Loans",
            "Partnership Shares", "Carpool Income", "Miscellaneous"
        ];

        const transactionTypeSelect = document.getElementById('transaction_type');
        const categorySelect = document.getElementById('category');

        function populateCategories(categories) {
            categorySelect.innerHTML = '';
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.toLowerCase().replace(/ /g, '_');
                option.textContent = category;
                categorySelect.appendChild(option);
            });
        }

        transactionTypeSelect.addEventListener('change', function() {
            if (transactionTypeSelect.value === 'expense') {
                populateCategories(expenseCategories);
            } else if (transactionTypeSelect.value === 'receive') {
                populateCategories(receiveCategories);
            }
        });

        // Initial population based on the current selection
        if (transactionTypeSelect.value === 'expense') {
            populateCategories(expenseCategories);
        } else if (transactionTypeSelect.value === 'receive') {
            populateCategories(receiveCategories);
        }
    });
</script>